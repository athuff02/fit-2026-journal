<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fit 2026 Mindset Journal</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Fit 2026 Journal">

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-900 min-h-screen">
<div class="max-w-md mx-auto p-4">

  <!-- Header -->
  <header class="text-center mb-6">
    <h1 class="text-xl font-semibold">Fit 2026 Mindset Journal</h1>
    <p id="dateDisplay" class="text-sm text-gray-500 mt-1"></p>
    <p id="themeDisplay" class="text-lg font-medium mt-2"></p>
    <p id="streakDisplay" class="text-sm text-gray-600 mt-1"></p>
	<p id="scriptureDisplay" class="text-sm text-gray-500 mt-1 italic"></p>
	
  </header>

  <!-- Tabs -->
  <nav class="flex justify-center gap-4 mb-6">
    <button id="dailyTab" class="border-b-2 border-gray-900 pb-1 text-sm font-medium">
      Daily Focus
    </button>
    <button id="historyTab" class="pb-1 text-sm font-medium text-gray-400">
      History
    </button>
  </nav>

  <!-- DAILY VIEW -->
  <section id="dailyView">
    <form id="journalForm" class="space-y-4">

        <textarea class="w-full p-3 border rounded" rows="3" placeholder="1. Why does this part of my life matter?" data-question="q1"></textarea>
        <textarea class="w-full p-3 border rounded" rows="3" placeholder="2. Where do I want to be as far as this theme?" data-question="q2"></textarea>
        <textarea class="w-full p-3 border rounded" rows="3" placeholder="3. What might I be doing if I cared about this more?" data-question="q3"></textarea>
        <textarea class="w-full p-3 border rounded" rows="3" placeholder="4. What is one small improvement I can make?" data-question="q4"></textarea>
        <textarea class="w-full p-3 border rounded" rows="3" placeholder="5. What resistance do I need to overcome?" data-question="q5"></textarea>

      <input id="actionItem" type="text" class="w-full p-3 border rounded" placeholder="Action Item" />

      <p class="text-sm text-gray-500 italic text-center">
        Now, pray God will bless your efforts in this area.
      </p>

      <button class="bg-gray-900 text-white py-3 rounded w-full text-sm font-medium">
        Save Entry
      </button>

      <button type="button" id="calendarBtn" class="border border-gray-900 py-3 rounded w-full text-sm font-medium">
        Add Action Item to Calendar
      </button>

    </form>
  </section>

  <!-- HISTORY VIEW -->
  <section id="historyView" class="hidden">
    <select id="themeFilter" class="w-full p-2 border rounded mb-4 text-sm">
      <option value="all">All Themes</option>
    </select>

    <div id="historyList" class="space-y-4"></div>
  </section>

</div>

<!-- MODAL -->
<div id="modal" class="fixed inset-0 bg-black/50 hidden flex items-center justify-center p-4">
  <div class="bg-white rounded p-4 max-w-md w-full space-y-3">
    <div id="modalContent"></div>
    <div class="flex gap-2">
      <button id="exportBtn" class="border px-3 py-2 rounded text-sm">Export .txt</button>
      <button onclick="closeModal()" class="ml-auto text-sm text-gray-500">Close</button>
    </div>
  </div>
</div>

<script>
/* ================= CONFIG ================= */
const THEMES = [
  "Health/Fitness","Faith","Discipline/Habits","Romance","Parenting",
  "Career","Finances","Service/Legacy","Developing Intellect & Skills",
  "Friendships/Networking","Hobbies","Reflection/Planning"
];
const SCRIPTURES = {
  "Health/Fitness": "1 Corinthians 6:19–20",
  "Faith": "Hebrews 11:6",
  "Discipline/Habits": "1 Corinthians 9:27",
  "Romance": "Ephesians 5:25",
  "Parenting": "Proverbs 22:6",
  "Career": "Colossians 3:23",
  "Finances": "Proverbs 3:9–10",
  "Service/Legacy": "Matthew 20:26–28",
  "Developing Intellect & Skills": "Proverbs 18:15",
  "Friendships/Networking": "Proverbs 27:17",
  "Hobbies": "Ecclesiastes 3:13",
  "Reflection/Planning": "Psalm 90:12"
};
const STORAGE_KEY = "north_star_entries";
const ANCHOR_DATE = new Date("2026-01-01");

/* ================= HELPERS ================= */
const today = new Date();
const todayISO = today.toISOString().split("T")[0];

const formatDate = d => d.toLocaleDateString(undefined,{weekday:"long",year:"numeric",month:"long",day:"numeric"});
const getEntries = () => JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
const saveEntries = e => localStorage.setItem(STORAGE_KEY, JSON.stringify(e));

function getTodayTheme() {
  const diff = Math.floor((today - ANCHOR_DATE) / 86400000);
  return THEMES[diff % THEMES.length];
}

/* ================= STREAK ================= */
function calculateStreak(entries) {
  const days = [...new Set(entries.map(e => e.date))].sort().reverse();
  let streak = 0;
  let check = new Date(todayISO);

  for (let d of days) {
    if (d === check.toISOString().split("T")[0]) {
      streak++;
      check.setDate(check.getDate() - 1);
    } else break;
  }
  return streak;
}

/* ================= INIT ================= */
document.getElementById("dateDisplay").textContent = formatDate(today);
document.getElementById("themeDisplay").textContent = `Today's Focus: ${getTodayTheme()}`;

const entries = getEntries();
document.getElementById("streakDisplay").textContent =
  `Current Streak: ${calculateStreak(entries)} day${calculateStreak(entries) === 1 ? "" : "s"}`;
document.getElementById("scriptureDisplay").textContent =
  `Scripture: ${SCRIPTURES[getTodayTheme()]}`;
const modal = document.getElementById("modal");
const modalContent = document.getElementById("modalContent");
const exportBtn = document.getElementById("exportBtn");


/* ================= TABS ================= */
dailyTab.onclick = () => {
  dailyView.classList.remove("hidden");
  historyView.classList.add("hidden");
};

historyTab.onclick = () => {
  historyView.classList.remove("hidden");
  dailyView.classList.add("hidden");
  renderHistory();
};

/* ================= SAVE ================= */
journalForm.onsubmit = e => {
  e.preventDefault();

  const responses = {};
  document.querySelectorAll("[data-question]").forEach(q => responses[q.dataset.question] = q.value);

  entries.unshift({
    date: todayISO,
    theme: getTodayTheme(),
    responses,
    actionItem: actionItem.value,
    createdAt: new Date().toISOString()
  });

  saveEntries(entries);
  alert("Entry saved.");
  location.reload();
};

/* ================= CALENDAR ================= */
calendarBtn.onclick = () => {
  if (!actionItem.value) return alert("Add an Action Item first.");
  window.open(
    `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(actionItem.value)}`,
    "_blank"
  );
};

/* ================= HISTORY ================= */
THEMES.forEach(t => themeFilter.innerHTML += `<option>${t}</option>`);
themeFilter.onchange = renderHistory;

function renderHistory() {
  historyList.innerHTML = "";
  getEntries()
    .filter(e => themeFilter.value === "all" || e.theme === themeFilter.value)
    .forEach(e => {
      const div = document.createElement("div");
      div.className = "border p-3 rounded bg-white cursor-pointer";
      div.innerHTML = `<p class="text-sm font-medium">${e.date} — ${e.theme}</p>`;
      div.onclick = () => openModal(e);
      historyList.appendChild(div);
    });
}

/* ================= MODAL ================= */
function openModal(entry) {
  modal.classList.remove("hidden");

  modalContent.innerHTML = `
    <p class="font-medium">${entry.date} — ${entry.theme}</p>
    <p class="text-sm italic text-gray-500">Scripture: ${SCRIPTURES[entry.theme]}</p>
    ${Object.values(entry.responses).map((r,i)=>`
      <p class="text-sm mt-1"><strong>Q${i+1}:</strong> ${r}</p>
    `).join("")}
    <p class="text-sm mt-2"><strong>Action:</strong> ${entry.actionItem}</p>
  `;

  exportBtn.onclick = () => exportTxt(entry);
}

function closeModal() {
  modal.classList.add("hidden");
}


/* ================= EXPORT ================= */
function exportTxt(entry) {
  const text = `
Date: ${entry.date}
Theme: ${entry.theme}
Scripture: ${SCRIPTURES[entry.theme]}

1. ${entry.responses.q1}
2. ${entry.responses.q2}
3. ${entry.responses.q3}
4. ${entry.responses.q4}
5. ${entry.responses.q5}

Action Item:
${entry.actionItem}
  `.trim();

  const blob = new Blob([text], { type: "text/plain" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = `fit-2026_${entry.date}_${entry.theme.replace(/\\W+/g,"_").toLowerCase()}.txt`;
  link.click();
}
/* ================= WEEKLY SUMMARY CARD ================= */
function renderWeeklySummary() {
  const now = new Date();
  const weekAgo = new Date();
  weekAgo.setDate(now.getDate() - 6);

  const recent = getEntries().filter(e =>
    new Date(e.date) >= weekAgo
  );

  if (!recent.length) return;

  const themes = [...new Set(recent.map(e => e.theme))];
  const actions = recent.map(e => e.actionItem).filter(Boolean);

  const div = document.createElement("div");
  div.className = "border rounded p-3 bg-gray-100";

  div.innerHTML = `
    <p class="font-medium text-sm">Weekly Summary</p>
    <p class="text-sm mt-1">Days Completed: ${recent.length}/7</p>
    <p class="text-sm mt-1">Themes: ${themes.join(", ")}</p>
    <p class="text-sm mt-2 font-medium">Action Items:</p>
    <ul class="text-sm list-disc ml-4">
      ${actions.map(a => `<li>${a}</li>`).join("")}
    </ul>
  `;

  historyList.appendChild(div);
}
renderWeeklySummary();



</script>
</body>
</html>


